<div class="back-image">
        
</div>
<div class="whole">
    <div *ngIf="thre">
        <div class="title">
            <div class="title-content">{{thre.title}}</div>
            <div class="title-comment">
                <div><i class="fa fa-user" aria-hidden="true"></i> {{thre.username}}</div>
                <div><i class="fa fa-calendar" aria-hidden="true"></i> Create, {{thre.create_date | date :'medium' }} </div>
                <div><i class="fa fa-calendar-o" aria-hidden="true"></i> Update, {{thre.update_date | date :'medium'}}</div>
            </div>
        </div>
        <div class="content">
            <div [innerHTML]="thre.content | safeHtml"></div>
        </div>
        <button (click)="goBack()"><i class="fa fa-arrow-left" aria-hidden="true"></i> back</button>
        <span *ngIf="thre.userid === auth.currentUser._id">
            <button (click)="goEdit()"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> Edit</button>
            <button (click)="goDelete()"><i class="fa fa-trash-o" aria-hidden="true"></i> Delete</button>
        </span>
        <div style="margin : 40px 0 0 0;">
            <hr>
            <div *ngFor="let comment of thre.comments; let i = index" style="border-bottom : 1px solid #777; padding : 8px 16px;">
                <div *ngIf="comment != null">
                <!-- <i class="fa fa-commenting-o" aria-hidden="true"></i> -->
                <div style="font-size : 14px; margin-bottom : 10px;"><i class="fa fa-child" aria-hidden="true"></i><span style="color : #2a8db2; font-weight:bold; font-size : 1.1em;"> {{comment.username}}   </span><span style="font-size : 12px;"><i class="fa fa-calendar-o" aria-hidden="true"></i> {{comment.create_date | date : 'medium'}}</span>
                    <span style="float : right; margin : 0 10px 0 0">
                        <span *ngIf="comment.userid === auth.currentUser._id"><i class="fa fa-hand-peace-o" aria-hidden="true"></i> my comment
                            <span *ngIf="!comment.deleted">
                                <button (click)="convertMode(2, comment)"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> Edit</button>
                                <button (click)="goCommentDelete(comment)"><i class="fa fa-trash-o" aria-hidden="true"></i> Delete</button>
                            </span>
                        </span>
                        <button *ngIf="!comment.deleted" (click)="convertMode(3, comment)"><i class="fa fa-plus" aria-hidden="true"></i> Comment</button>
                    </span>               
                </div>
                <div style="margin : 32px 0;"></div>
                <div *ngIf="comment._parent_id != '-1'" style="margin : 16px 8px 16px 8px; border : 1px solid #CCC; border-radius : 4px;">
                    <div *ngIf="comment.parent_comment">
                        <div style="border-bottom : 1px solid #CCC; background-color : rgba(192, 192, 192, 0.7); padding : 4px 4px; font-size : 0.8em;"><i class="fa fa-anchor" aria-hidden="true"></i><span style="color : #1e991e; font-weight:bold; font-size : 1.1em;"> {{comment.parent_comment.username}} </span>said</div>
                        <div style="padding : 12px 8px;" [innerHTML]="comment.deleted ? '삭제된 댓글입니다.' : comment.parent_comment.content | safeHtml"></div>
                    </div>
                </div>
                <div style="margin-bottom : 10px;" [innerHTML]="comment.content | safeHtml"></div>
                </div>
            </div>
            <div style="margin : 20px;"></div>
            <!-- <div #comment contenteditable="" style="border : 1px solid #AAA; min-height : 80px; padding : 8px;"></div> -->
            <div style="margin : 10px;"></div>
            <!-- <button (click)="addComment()">comment</button> -->
            <button (click)="goBack()"><i class="fa fa-arrow-left" aria-hidden="true"></i> back</button>
            <button (click)="convertMode(1)"><i class="fa fa-plus" aria-hidden="true"></i> Comment</button>
        </div>
    </div>
</div>


<div class="modal" [ngClass]="{'modal-show' : editPopup}" >
    <div class="modal-layout" (click)="closeModal()">
    </div>
    <div class="modal-box" [ngClass]="{'modal-box-show' : editPopup}">
        <div class="modal-content">
            <!-- <div #editcomment contenteditable="true" [innerHTML]="selComment.content | safeHtml" style=""></div> -->
            <div *ngIf="editPopup === 3" [innerHTML]="selComment.content | safeHtml" style="border : 1px solid #AAA; height : 120px; margin-bottom : 16px; padding : 8px; overflow : auto;"></div>
            <div #comment contenteditable="" [innerHTML]="modComment | safeHtml" style="border : 1px solid #AAA; height : 360px; padding : 8px; overflow : auto;">
            </div>
            <div style="margin : 20px;"></div>
            <div *ngIf="editPopup === 1"><button (click)="addComment()">New Comment</button></div>
            <div *ngIf="editPopup === 2"><button (click)="editComment()">Edit Comment</button></div>
            <div *ngIf="editPopup === 3"><button (click)="commentComment()">Plus Comment</button></div>
        </div>
    </div>
</div>